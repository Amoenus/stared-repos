# python 3 

####### cacluate geojson area ####### 
# https://gis.stackexchange.com/questions/127607/area-in-km-from-polygon-of-coordinates


import pyproj    
import shapely
import shapely.ops as ops
from shapely.geometry.polygon import Polygon
from functools import partial



def fix_geojson(geojson):
	#mygeojson=[[[-0.05396604537963867,51.49975355462072],[-0.04967451095581055,51.50217792851145],[-0.04781842231750488,51.500982454474055],[-0.04903078079223633,51.49991384778514],[-0.04815101623535156,51.49935949819495],[-0.04822611808776855,51.49899883339533],[-0.04706740379333496,51.4988251789554],[-0.045104026794433594,51.500401402695],[-0.04419207572937012,51.50003406728849],[-0.042443275451660156,51.50020771712239],[-0.04076957702636719,51.49953982952447],[-0.042099952697753906,51.49825745789973],[-0.0442671775817871,51.49909901834819],[-0.04628419876098633,51.49795021767351],[-0.04729270935058594,51.49859141231831],[-0.04883766174316406,51.498511263481014],[-0.04948139190673828,51.4974425988491],[-0.05190610885620117,51.49624032118747],[-0.05106925964355469,51.495639170464386],[-0.05353689193725585,51.494423485886074],[-0.054416656494140625,51.495038011813065],[-0.05276441574096679,51.49613345052725],[-0.054759979248046875,51.497829992673395],[-0.05761384963989257,51.49515824417759],[-0.0536656379699707,51.491791618094226],[-0.04836559295654297,51.494036063109085],[-0.044674873352050774,51.492339379749595],[-0.039246082305908196,51.49322112858949],[-0.03750801086425781,51.492486339073956],[-0.032122135162353516,51.49360855829253],[-0.03182172775268555,51.504174767715845],[-0.03422498703002929,51.5073401462148],[-0.04317283630371094,51.50786101021458],[-0.05688428878784179,51.5011026711586],[-0.05587577819824219,51.4997134812415],[-0.05396604537963867,51.49975355462072]]] 
	output= []
		for k in range(len(mygeojson[0])):
		output.append((tuple(mygeojson[0][k])))
	return output

    
def main(demo_geojson=False,geojson=None):
	
	if demo_geojson == False:
		geom = Polygon([(0, 0), (0, 10), (10, 10), (10, 0), (0, 0)])
	else:
		output = fix_geojson(geojson)
		geom = Polygon(output)
		geom_area = ops.transform(
				partial(
				pyproj.transform,
				pyproj.Proj(init='EPSG:4326'),
				pyproj.Proj(proj='aea',
				lat1=geom.bounds[1],
				lat2=geom.bounds[3])),
				geom)

	# Print the area in m^2
	print (geom_area.area )
	# Print the area in km^2
	print (geom_area.area /1000000)
	return geom_area.area 








